[
  {
    "objectID": "Time_series_2.html",
    "href": "Time_series_2.html",
    "title": "Auto Machine Learning",
    "section": "",
    "text": "á» bÃ i viáº¿t nÃ y, chÃºng ta sáº½ tiáº¿p tá»¥c vá»›i Ä‘á» tÃ i phÃ¢n tÃ­ch dá»¯ liá»‡u thá»i gian trong Quáº£n lÃ­ chuá»—i cung á»©ng.\nLÃ½ do mÃ¬nh tiáº¿p tá»¥c vá»›i chá»§ Ä‘á» nÃ y lÃ  vÃ¬ á»Ÿ bÃ i viáº¿t trÆ°á»›c pháº§n xÃ¢y dá»±ng mÃ´ hÃ¬nh Machine Learning vá»›i R váº«n chÆ°a tá»‘t, hoáº·c lÃ m mÃ¬nh chÆ°a cáº£m tháº¥y Ä‘Ã£ ğŸ˜…ğŸ˜… . CÃ¡c báº¡n nÃ o chÆ°a Ä‘á»c hoáº·c muá»‘n xem láº¡i topic trÆ°á»›c thÃ¬ cÃ³ thá»ƒ áº¥n vÃ o Ä‘Ã¢y Time series model.\nVÃ¬ váº­y, á»Ÿ bÃ i viáº¿t nÃ y, mÃ¬nh sáº½ táº­p trung vÃ o xÃ¢y dá»±ng mÃ´ hÃ¬nh Machine Learning Ä‘á»ƒ Ä‘Æ°a ra dá»± bÃ¡o tá»‘t hÆ¡n. NgoÃ i ra, mÃ¬nh cÅ©ng giá»›i thiá»‡u hai packages trong R cÃ³ kháº£ nÄƒng xá»­ lÃ­ tá»‘t dá»¯ liá»‡u thá»i gian mÃ  khÃ´ng tá»‘n nhiá»u cÃ´ng sá»©c, Ä‘Ã³ lÃ  package timetk vÃ  modeltime.h2o .\n\n\nÄáº§u tiÃªn, váº«n lÃ  thao tÃ¡c quen thuá»™c trong R, chÃºng ta sáº½ táº£i dá»¯ liá»‡u vÃ  cÃ¡c packages cáº§n thiáº¿t vÃ o.\n\n\nCode\n#Call packages:\npacman::p_load(rio,\n               here,\n               janitor,\n               tidyverse,\n               dplyr,\n               magrittr,\n               lubridate,\n               stringr\n               )\n\n\n\n\n\n\n\n\nTáº£i thÆ° viá»‡n:\n\n\n\nNáº¿u cÃ¡c báº¡n chÆ°a cÃ³ cÃ¡c packages nÃ y, báº¡n cÃ³ thá»ƒ táº£i xuá»‘ng tá»« CRAN R báº±ng cÃº phÃ¡p: `install.packages(*\"name_of_package\"*)`\n\n\nThÃ´ng thÆ°á»ng khi phÃ¢n tÃ­ch, viá»‡c xá»­ lÃ­ dá»¯ liá»‡u khÃ¡ tá»‘n thá»i gian vÃ  cÃ´ng sá»©c. Báº¡n cÃ³ thá»ƒ xem pháº§n code xá»­ lÃ­ cá»§a Frank Corrigan dÆ°á»›i Ä‘Ã¢y Ä‘á»ƒ tiáº¿t kiá»‡m thá»i gian.\n\n\nCode\n#Change to suitable class (I change the name dataset to product_demand to shortly write)\nproduct_demand &lt;-product_demand %&gt;% \n    mutate(Date = as.Date(Date,format = \"%Y/%m/%d\"),\n           Product_Category = as.factor(Product_Category))\n\nproduct_demand$Order_Demand &lt;- \n  gsub(\"[(]\", \"-\", product_demand$Order_Demand)\nproduct_demand$Order_Demand &lt;- \n  gsub(\"[)]\", \"\", product_demand$Order_Demand)\nproduct_demand$Order_Demand &lt;- \n  as.numeric(product_demand$Order_Demand)\n\n#Then I will create a lot of cols contain year, month, week data and just select from 2012 to 2016:\nproduct_demand &lt;-product_demand %&gt;%\n  mutate(Month = month(Date),\n         Year = year(Date),\n         Week_day = wday(Date)) %&gt;% \n  filter(Year %in% c(2016:2012) & Order_Demand &gt; 0) \n\n\n#So I will calculate the total order demand divided by year and month:\ndaily_df&lt;-product_demand %&gt;% \n  group_by(Warehouse,Date) %&gt;%   \n  summarise(daily_demand = round(sum(Order_Demand,\n                               na.rm = T))) %&gt;% \n  ungroup()\n\n\nSau Ä‘Ã³, chÃºng ta táº£i dá»¯ liá»‡u vÃ o R. Náº¿u báº¡n nÃ o chÆ°a cÃ³, báº¡n cÃ³ thá»ƒ áº¥n vÃ o nÃºt táº£i phÃ­a dÆ°á»›i nÃ y Ä‘á»ƒ táº£i dá»¯ liá»‡u vá» thá»±c hÃ nh.\n\n\nCode\nlibrary(downloadthis)\nproduct_demand %&gt;%\n  download_this(\n    output_name = \"product_demand\",\n    output_extension = \".csv\",\n    button_label = \"Download data\",\n    button_type = \"warning\",\n    has_icon = TRUE,\n    icon = \"fa fa-save\"\n  )\n\n\n Download data"
  },
  {
    "objectID": "Time_series_2.html#chuáº©n-bá»‹-dá»¯-liá»‡u",
    "href": "Time_series_2.html#chuáº©n-bá»‹-dá»¯-liá»‡u",
    "title": "Auto Machine Learning",
    "section": "",
    "text": "Äáº§u tiÃªn, váº«n lÃ  thao tÃ¡c quen thuá»™c trong R, chÃºng ta sáº½ táº£i dá»¯ liá»‡u vÃ  cÃ¡c packages cáº§n thiáº¿t vÃ o.\n\n\nCode\n#Call packages:\npacman::p_load(rio,\n               here,\n               janitor,\n               tidyverse,\n               dplyr,\n               magrittr,\n               lubridate,\n               stringr\n               )\n\n\n\n\n\n\n\n\nTáº£i thÆ° viá»‡n:\n\n\n\nNáº¿u cÃ¡c báº¡n chÆ°a cÃ³ cÃ¡c packages nÃ y, báº¡n cÃ³ thá»ƒ táº£i xuá»‘ng tá»« CRAN R báº±ng cÃº phÃ¡p: `install.packages(*\"name_of_package\"*)`\n\n\nThÃ´ng thÆ°á»ng khi phÃ¢n tÃ­ch, viá»‡c xá»­ lÃ­ dá»¯ liá»‡u khÃ¡ tá»‘n thá»i gian vÃ  cÃ´ng sá»©c. Báº¡n cÃ³ thá»ƒ xem pháº§n code xá»­ lÃ­ cá»§a Frank Corrigan dÆ°á»›i Ä‘Ã¢y Ä‘á»ƒ tiáº¿t kiá»‡m thá»i gian.\n\n\nCode\n#Change to suitable class (I change the name dataset to product_demand to shortly write)\nproduct_demand &lt;-product_demand %&gt;% \n    mutate(Date = as.Date(Date,format = \"%Y/%m/%d\"),\n           Product_Category = as.factor(Product_Category))\n\nproduct_demand$Order_Demand &lt;- \n  gsub(\"[(]\", \"-\", product_demand$Order_Demand)\nproduct_demand$Order_Demand &lt;- \n  gsub(\"[)]\", \"\", product_demand$Order_Demand)\nproduct_demand$Order_Demand &lt;- \n  as.numeric(product_demand$Order_Demand)\n\n#Then I will create a lot of cols contain year, month, week data and just select from 2012 to 2016:\nproduct_demand &lt;-product_demand %&gt;%\n  mutate(Month = month(Date),\n         Year = year(Date),\n         Week_day = wday(Date)) %&gt;% \n  filter(Year %in% c(2016:2012) & Order_Demand &gt; 0) \n\n\n#So I will calculate the total order demand divided by year and month:\ndaily_df&lt;-product_demand %&gt;% \n  group_by(Warehouse,Date) %&gt;%   \n  summarise(daily_demand = round(sum(Order_Demand,\n                               na.rm = T))) %&gt;% \n  ungroup()\n\n\nSau Ä‘Ã³, chÃºng ta táº£i dá»¯ liá»‡u vÃ o R. Náº¿u báº¡n nÃ o chÆ°a cÃ³, báº¡n cÃ³ thá»ƒ áº¥n vÃ o nÃºt táº£i phÃ­a dÆ°á»›i nÃ y Ä‘á»ƒ táº£i dá»¯ liá»‡u vá» thá»±c hÃ nh.\n\n\nCode\nlibrary(downloadthis)\nproduct_demand %&gt;%\n  download_this(\n    output_name = \"product_demand\",\n    output_extension = \".csv\",\n    button_label = \"Download data\",\n    button_type = \"warning\",\n    has_icon = TRUE,\n    icon = \"fa fa-save\"\n  )\n\n\n Download data"
  },
  {
    "objectID": "Time_series_2.html#thÃ´ng-tin",
    "href": "Time_series_2.html#thÃ´ng-tin",
    "title": "Auto Machine Learning",
    "section": "2.1 ThÃ´ng tin:",
    "text": "2.1 ThÃ´ng tin:\nPackage timetk lÃ  má»™t package náº±m trong há»‡ sinh thÃ¡i modeltime Ä‘á»ƒ phÃ¢n tÃ­ch vÃ  dá»± bÃ¡o chuá»—i thá»i gian. NÃ³ cÃ³ thá»ƒ dá»± bÃ¡o ráº¥t rá»™ng vÃ  giÃºp ngÆ°á»i dÃ¹ng trÃ¡nh máº¥t nhiá»u thá»i gian Ä‘á»ƒ tÃ¬m hiá»ƒu, gá»“m nhá»¯ng Ä‘áº·c Ä‘iá»ƒm sau:\n\nNhiá»u thuáº­t toÃ¡n.\nTáº­p há»£p vÃ  láº¥y máº«u láº¡i.\nHá»c mÃ¡y.\nHá»c sÃ¢u.\nMÃ´ hÃ¬nh hÃ³a cÃ³ thá»ƒ má»Ÿ rá»™ng: HÆ¡n 10.000 chuá»—i thá»i gian\n\nPackage timetk cÃ³ trong CRAN, báº¡n cÃ³ thá»ƒ táº£i xuá»‘ng thÃ´ng qua cÃº phÃ¡p install.packages(\"timetk\"). ThÃ´ng tin thÃªm, báº¡n cÃ³ thá»ƒ theo dÃµi post cá»§a (Matt Dancho, n.d.)"
  },
  {
    "objectID": "Time_series_2.html#thá»±c-hÃ nh-trong-r",
    "href": "Time_series_2.html#thá»±c-hÃ nh-trong-r",
    "title": "Auto Machine Learning",
    "section": "2.2 Thá»±c hÃ nh trong R:",
    "text": "2.2 Thá»±c hÃ nh trong R:\ná» bÃ i trÆ°á»›c, báº¡n cÃ³ thá»ƒ tháº¥y Ä‘á»ƒ hiá»ƒn thá»‹ dá»¯ liá»‡u dáº¡ng thá»i gian trong R thÃ¬ ta cáº§n pháº£i chuyá»ƒn Ä‘á»•i dá»¯ liá»‡u sang class zoo hoáº·c xts rá»“i má»›i dÃ¹ng package dygraphs Ä‘á»ƒ hiá»ƒn thá»‹ dá»¯ liá»‡u.\nTrong timetk, ta khÃ´ng cáº§n chuyá»ƒn Ä‘á»•i mÃ  chá»‰ cáº§n dá»¯ liá»‡u á»Ÿ dáº¡ng báº£ng lÃ  cÃ³ thá»ƒ táº¡o Ä‘Æ°á»£c biá»ƒu Ä‘á»“. NgoÃ i ra, báº¡n hoÃ n toÃ n dá»… dÃ ng táº¡o theo nhÃ³m báº±ng cÃ¡ch thÃªm hÃ m group_by() á»Ÿ trÆ°á»›c.\n\n\n\n\n\n\nThÃªm sá»± tÆ°Æ¡ng tÃ¡c:\n\n\n\nHÃ m plot_time_series() sáº½ hiá»ƒn thá»‹ dá»¯ liá»‡u dáº¡ng Ä‘Æ°á»ng line nhÆ° cÃ¡c biá»ƒu Ä‘á»“ thÃ´ng thÆ°á»ng.\nBáº¡n cÃ³ thá»ƒ thÃªm Ä‘á»‘i sá»‘ .interactive = TRUE Ä‘á»ƒ ngÆ°á»i dÃ¹ng tÆ°Æ¡ng tÃ¡c dÆ°á»›i dáº¡ng HTML"
  },
  {
    "objectID": "Time_series_2.html#chuáº©n-bá»‹-dá»¯-liá»‡u-1",
    "href": "Time_series_2.html#chuáº©n-bá»‹-dá»¯-liá»‡u-1",
    "title": "Auto Machine Learning",
    "section": "2.3 Chuáº©n bá»‹ dá»¯ liá»‡u:",
    "text": "2.3 Chuáº©n bá»‹ dá»¯ liá»‡u:\n\n\nCode\nlibrary(timetk)\ndaily_df %&gt;% \n  group_by(Warehouse) %&gt;% \n  plot_time_series(Date, \n                 daily_demand,\n                 .facet_ncol  = 2,\n                 .smooth      = F,\n                 .interactive = TRUE)\n\n\n\n\n\n\nNhÆ° biá»ƒu Ä‘á»“ trÃªn, ta cÃ³ thá»ƒ Ä‘Ã¡nh giÃ¡ ráº±ng:\n\nNhÃ  kho A: nhu cáº§u Ä‘áº·t hÃ ng cá»§a khÃ¡ch á»Ÿ má»©c tháº¥p nháº¥t trong 4 nhÃ  kho. Chá»‰ cÃ³ cuá»‘i nÄƒm 2015 lÃ  Ä‘á»™t ngá»™t tÄƒng cao, kháº£ nÄƒng lÃ  nhÃ  kho nÃ y Ä‘ang bÃ¹ hÃ ng vÃ o Ä‘á»£t sales cuá»‘i nÄƒm cho cÃ¡c kho khÃ¡c Ä‘á»ƒ trÃ¡nh outstock.\nNhÃ  kho J: ta tháº¥y nhu cáº§u Ä‘áº·t hÃ ng cÃ³ má»©c Ä‘á»™ biáº¿n Ä‘á»™ng cao. VÃ¬ váº­y, nhÃ  kho nÃ y khÃ´ng chá»‰ cáº§n phá»‘i há»£p giá»¯a viá»‡c forecasting vÃ  xÃ¢y dá»±ng nhiá»u plan backup Ä‘á»ƒ Ä‘áº£m báº£o hÃ ng khÃ´ng outstock cÅ©ng nhÆ° giáº£m chi phÃ­ tá»“n kho (inventory cost).\nNhÃ  kho C vÃ  S: nhu cáº§u Ä‘áº·t hÃ ng cÃ³ váº» á»•n Ä‘á»‹nh hÆ¡n chá»‰ trá»« vÃ i ngÃ y nhu cáº§u tÄƒng cao Ä‘á»™t biá»ƒn.\n\nSau khi phÃ¢n tÃ­ch, chÃºng ta sáº½ Ä‘i tá»›i pháº§n xÃ¢y dá»±ng mÃ´ hÃ¬nh. BÆ°á»›c Ä‘áº§u tiÃªn váº«n lÃ  chia bá»™ dá»¯ liá»‡u á»Ÿ tá»‰ lá»‡ 7:3 thÃ nh training set vÃ  testing set. á» Ä‘Ã¢y, ta sáº½ sá»­ dá»¥ng cÃ¡c hÃ m sau Ä‘á»ƒ:\nÄáº§u tiÃªn, chÃºng ta cÅ©ng chia dá»¯ liá»‡u thÃ nh 2 bá»™ báº±ng hÃ m time_series_split().\nSau Ä‘Ã³, táº¡o biá»ƒu Ä‘á»“ báº±ng:\n\ntk_time_series_cv_plan(): Chuyá»ƒn Ä‘á»•i dá»¯ liá»‡u Ä‘Ã£ resample thÃ nh dáº¡ng báº£ng.\nplot_time_series_cv_plan(): Hiá»ƒn thá»‹ dá»¯ liá»‡u Ä‘Ã£ resample thá»i gian.\n\n\n\nCode\nsplits &lt;- time_series_split(daily_df, \n                            assess = \"12 month\",\n                            cumulative = TRUE)\n\nsplits %&gt;%\n  tk_time_series_cv_plan() %&gt;%\n  plot_time_series_cv_plan(Date, \n                           daily_demand, \n                           .interactive = T)"
  },
  {
    "objectID": "Time_series_2.html#chia-dá»¯-liá»‡u",
    "href": "Time_series_2.html#chia-dá»¯-liá»‡u",
    "title": "Auto Machine Learning",
    "section": "2.4 Chia dá»¯ liá»‡u:",
    "text": "2.4 Chia dá»¯ liá»‡u:\nTiáº¿p theo, chÃºng ta sáº½ xÃ¢y dá»±ng mÃ´ hÃ¬nh vá»›i mÃ´ hÃ¬nh vá»›i package {recipe}. Äiá»u Ä‘áº·c biá»‡t lÃ  trong R package {timetk} cÃ³ káº¿t há»£p vá»›i {recipe}.\nCÃ¡c bÆ°á»›c bao gá»“m:\n\nB1: Táº¡o Ä‘á»‘i tÆ°á»£ng dáº¡ng class recipe() vá»›i dá»¯ liá»‡u tá»« training set.\nB2: Sá»­ dá»¥ng hÃ m step_timeseries_signature() Ä‘á»ƒ chuyá»ƒn Ä‘á»•i tá»« dá»¯ liá»‡u ngÃ y hoáº·c giá» thÃ nh nhiá»u tÃ­nh nÄƒng cÃ³ thá»ƒ há»— trá»£ cho viá»‡c xÃ¢y dá»±ng mÃ´ hÃ¬nh há»c mÃ¡y vá»›i dá»¯ liá»‡u chuá»—i thá»i gian.\nB3: TÃ¡ch bá»™ dá»¯ liá»‡u thÃ nh training set vÃ  testing set cÃ¹ng vá»›i cÃ¡c Ä‘áº·c tÃ­nh Ä‘Ã£ táº¡o á»Ÿ trÃªn báº±ng hÃ m prep() vÃ  bake().\n\n\n\nCode\nlibrary(rsample)\n\n\nWarning: package 'rsample' was built under R version 4.2.3\n\n\nCode\nlibrary(recipes)\nrecipe_spec &lt;- recipe(daily_demand ~ ., \n                      data = training(splits)) %&gt;%\n    step_timeseries_signature(Date) \n\ntrain_tbl &lt;- training(splits) %&gt;% bake(prep(recipe_spec), .)\n\ntest_tbl  &lt;- testing(splits) %&gt;% bake(prep(recipe_spec), .)\n\n\nBáº¡n cÃ³ thá»ƒ tháº¥y khi Ã¡p dá»¥ng káº¿t há»£p cÃ´ng thá»©c prep() vÃ  bake() thÃ¬ nhiá»u cá»™t má»›i Ä‘Ã£ Ä‘Æ°á»£c thÃªm vÃ o tá»« tÃ­nh nÄƒng cá»§a â€œngÃ yâ€. ÄÃ¢y lÃ  nhá»¯ng tÃ­nh nÄƒng chÃºng ta cÃ³ thá»ƒ sá»­ dá»¥ng trong cÃ¡c mÃ´ hÃ¬nh há»c mÃ¡y cá»§a mÃ¬nh."
  },
  {
    "objectID": "Time_series_2.html#xÃ¢y-dá»±ng-mÃ´-hÃ¬nh",
    "href": "Time_series_2.html#xÃ¢y-dá»±ng-mÃ´-hÃ¬nh",
    "title": "Auto Machine Learning",
    "section": "2.5 XÃ¢y dá»±ng mÃ´ hÃ¬nh:",
    "text": "2.5 XÃ¢y dá»±ng mÃ´ hÃ¬nh:\ná» Ä‘Ã¢y, chÃºng ta sá»­ dá»¥ng package modeltime.h2o. NÃ³ sáº½ huáº¥n luyá»‡n vÃ  kiá»ƒm chá»©ng chÃ©o (cross-validates) nhiá»u mÃ´ hÃ¬nh há»c mÃ¡y vÃ  há»c sÃ¢u (XGBoost GBM, GLM, Rá»«ng ngáº«u nhiÃªn, GBMâ€¦), sau Ä‘Ã³ huáº¥n luyá»‡n hai mÃ´ hÃ¬nh Stacked Ensembled, má»™t trong táº¥t cáº£ cÃ¡c mÃ´ hÃ¬nh vÃ  má»™t trong nhá»¯ng mÃ´ hÃ¬nh tá»‘t nháº¥t cá»§a má»—i loáº¡i. Cuá»‘i cÃ¹ng, mÃ´ hÃ¬nh tá»‘t nháº¥t Ä‘Æ°á»£c lá»±a chá»n.\nVÃ¬ nÃ³ khÃ´ng cÃ³ sáºµn trÃªn CRAN nÃªn báº¡n cÃ³ thá»ƒ táº£i theo cÃº phÃ¡p dÆ°á»›i Ä‘Ã¢y vÃ  thÃ´ng tin thÃªm á»Ÿ Ä‘Ã¢y (Matt Dancho 2024).\n\n\n\n\n\n\n\n\n\n\n\nTáº£i package Modeltime H2O:\n\n\n\ndevtools::install_github(\"business-science/modeltime.h2o\")\n\n\nTrÆ°á»›c khi sá»­ dá»¥ng modeltime.h2o, cáº§n pháº£i káº¿t ná»‘i vá»›i dáº¡ng H2O thÃ´ng qua hÃ m h2o.init().\n\n\nCode\nh2o.init(\n    nthreads = -1,\n    ip       = 'localhost',\n    port     = 54321\n)\n\n\nNgoÃ i ra cÃ³ má»™t Ä‘iá»u lÆ°u Ã½ khi báº¡n lÃ m viá»‡c vá»›i package modeltime Ä‘Ã³ lÃ  output tá»« R sáº½ xuáº¥t hiá»‡n cÃ¡c dÃ²ng nhÆ° kiá»ƒu |=========================================| 100% vÃ  khi xuáº¥t output ra dáº¡ng HTML hay PDF thÃ¬ nÃ³ váº«n xuáº¥t hiá»‡n. Äiá»u nÃ y lÃ m xáº¥u Ä‘i bÃ i bÃ¡o cÃ¡o cá»§a mÃ¬nh nÃªn chÃºng ta cÃ³ thá»ƒ sá»­ dá»¥ng hÃ m invisible() Ä‘á»ƒ R hiá»ƒu vÃ  chá»‰ Ä‘Æ°a ra káº¿t quáº£ cuá»‘i cÃ¹ng, bá» qua thÃ´ng bÃ¡o tá»« process.\n\n\nCode\nlibrary(modeltime.h2o)\nlibrary(parsnip)\n    ## Táº¡o ra cÃ¡c tiÃªu chÃ­ cho mÃ´ hÃ¬nh:\nmodel_spec &lt;- automl_reg(mode = 'regression') %&gt;%\n    set_engine(\n         engine                     = 'h2o',\n         max_runtime_secs           = 5, \n         max_runtime_secs_per_model = 3,\n         max_models                 = 3,\n         nfolds                     = 5,\n         exclude_algos              = c(\"DeepLearning\"),\n         verbosity                  = NULL,\n         seed                       = 786\n    ) \n\n## DÃ¹ng cÃ¡c tiÃªu chÃ­ Ä‘Ã³ Ä‘á»ƒ xÃ¢y dá»±ng train mÃ´ hÃ¬nh:\nmodel_fitted &lt;- model_spec %&gt;%\n    fit(daily_demand ~ ., \n        data = train_tbl)\n\n\n\n\n\n\n\n\n  \n    \n      ÄÃ¡nh giÃ¡ mÃ´ hÃ¬nh\n\n    \n    \n      Nguá»“n: package modeltime.h2o\n\n    \n    \n      MÃ´ hÃ¬nh\n\n      Sai sá»‘ trung bÃ¬nh\n\n    \n  \n  \n    GBM_1_AutoML_11_20240915_232904\n3.399269e+11\n    GLM_1_AutoML_11_20240915_232904\n1.314349e+12\n  \n  \n  \n\n\n\n\nKáº¿t quáº£ sáº½ ra cÃ¡c mÃ´ hÃ¬nh tá»‘t nháº¥t Ä‘Æ°á»£c lÆ°u trá»¯ trong báº£ng xáº¿p háº¡ng dá»±a trÃªn cÃ¡c chá»‰ sá»‘ Ä‘Ã¡nh giÃ¡ quen thuá»™c nhÆ°: RMSE,MSE,MAE,â€¦\nTheo máº·c Ä‘á»‹nh, mÃ´ hÃ¬nh cÃ³ giÃ¡ trá»‹ trung bÃ¬nh vá» sai sá»‘ tháº¥p nháº¥t sáº½ Ä‘Æ°á»£c há»n vÃ  tráº£ vá» á»Ÿ dáº¡ng class H20AutoML. Äá»ƒ biáº¿t thÃªm thÃ´ng tin, hÃ£y báº¡n cÃ³ thá»ƒ dÃ¹ng cÃº phÃ¡p ?h2o.automl á»Ÿ console.\nNgoÃ i ra, giáº£ sá»­ báº¡n chá»‰ cáº§n tÃªn cÃ¡c mÃ´ hÃ¬nh tá»‘t nháº¥t xáº¿p tá»« trÃªn xuá»‘ng tá»« R, báº¡n cÃ³ thá»ƒ dÃ¹ng hÃ m automl_leaderbord Ä‘á»ƒ xuáº¥t ra."
  },
  {
    "objectID": "Time_series_2.html#dá»±-Ä‘oÃ¡n-báº±ng-mÃ´-hÃ¬nh-vá»«a-xÃ¢y-dá»±ng",
    "href": "Time_series_2.html#dá»±-Ä‘oÃ¡n-báº±ng-mÃ´-hÃ¬nh-vá»«a-xÃ¢y-dá»±ng",
    "title": "Auto Machine Learning",
    "section": "2.6 Dá»± Ä‘oÃ¡n báº±ng mÃ´ hÃ¬nh vá»«a xÃ¢y dá»±ng:",
    "text": "2.6 Dá»± Ä‘oÃ¡n báº±ng mÃ´ hÃ¬nh vá»«a xÃ¢y dá»±ng:\nCuá»‘i cÃ¹ng, ta sáº½ dÃ¹ng mÃ´ hÃ¬nh tá»‘t nháº¥t Ä‘Æ°á»£c nháº¯c á»Ÿ trÃªn Ä‘á»ƒ dá»± Ä‘oÃ¡n dá»¯ liá»‡u báº±ng hÃ m predict.\nBáº£ng dÆ°á»›i Ä‘Ã¢y trÃ¬nh bÃ y vá» giÃ¡ trá»‹ dá»± Ä‘oÃ¡n á»Ÿ cáº£ 4 nhÃ  kho. VÃ¬ Ä‘á»ƒ minh há»a nÃªn mÃ¬nh chá»‰ thá»ƒ hiá»‡n 6 hÃ ng Ä‘áº§u tiÃªn cá»§a báº£ng.\n\n\nCode\ninvisible(capture.output({\nn&lt;-predict(model_fitted, test_tbl)\n}))\n\nn&lt;-head(n) %&gt;% \n     mutate(Date = head(test_tbl$Date),\n            Warehouse = c(\"A\",\"C\",\"J\",\"S\",\"A\",\"C\"))\nlibrary(gt)\nlibrary(gtExtras)\ngt(n[c(\"Date\",\"Warehouse\",\".pred\")]) %&gt;% \n   cols_label(\n    Date = md(\"**NgÃ y dá»± bÃ¡o**\"),\n    Warehouse = md(\"**NhÃ  kho**\"),\n    .pred = md(\"**GiÃ¡ trá»‹ dá»± bÃ¡o**\")) %&gt;%\n  cols_align(\n    align = \"center\",\n    columns = Warehouse\n  ) %&gt;% \n   tab_header(\n    title = md(\"**Káº¿t quáº£ dá»± bÃ¡o**\"),\n    subtitle = md(\"Nguá»“n: package modeltime.h2o\")) %&gt;% \n  gt_theme_538()\n\n\n\n\n\n\n  \n    \n      Káº¿t quáº£ dá»± bÃ¡o\n\n    \n    \n      Nguá»“n: package modeltime.h2o\n\n    \n    \n      NgÃ y dá»± bÃ¡o\n\n      NhÃ  kho\n\n      GiÃ¡ trá»‹ dá»± bÃ¡o\n\n    \n  \n  \n    2015-12-08\nA\n108655.82\n    2015-12-08\nC\n456436.33\n    2015-12-08\nJ\n2889507.46\n    2015-12-08\nS\n1287950.19\n    2015-12-09\nA\n17942.52\n    2015-12-09\nC\n457534.46"
  },
  {
    "objectID": "Time_series_2.html#Ä‘Ã¡nh-giÃ¡-mÃ´-hÃ¬nh",
    "href": "Time_series_2.html#Ä‘Ã¡nh-giÃ¡-mÃ´-hÃ¬nh",
    "title": "Auto Machine Learning",
    "section": "2.7 ÄÃ¡nh giÃ¡ mÃ´ hÃ¬nh:",
    "text": "2.7 ÄÃ¡nh giÃ¡ mÃ´ hÃ¬nh:\nSau khi Ä‘Ã£ dá»± Ä‘oÃ¡n, viá»‡c quan trá»ng cuá»‘i cÃ¹ng lÃ  Ä‘Ã¡nh giÃ¡ Ä‘á»™ tá»‘t cá»§a mÃ´ hÃ¬nh vá»«a train. VÃ  package modeltime cÃ³ cung cáº¥p thÃªm hÃ m:\n\nmodeltime_table(): chuyá»ƒn Ä‘á»‘i tÆ°á»£ng class h2o vá» dáº¡ng dá»¯ liá»‡u báº£ng.\nmodeltime_calibrate(): hÃ m Ä‘á»ƒ Ä‘Ã¡nh giÃ¡ mÃ´ hÃ¬nh Ä‘Æ°á»£c xÃ¢y dá»±ng.\nmodeltime_forecast(): hÃ m Ä‘á»ƒ dá»± Ä‘oÃ¡n giÃ¡ trá»‹ dá»±a trÃªn mÃ´ hÃ¬nh Ä‘Æ°á»£c gÃ¡n.\n\n\n\nCode\n## Chuyá»ƒn Ä‘á»‘i tÆ°á»£ng thÃ nh dáº¡ng báº£ng Ä‘á»ƒ dá»… dÃ ng láº¥y dá»¯ liá»‡u:\n# Disable progress bar for a specific block of code\nmodeltime_tbl &lt;- modeltime_table(\n    model_fitted\n) \n\n## ÄÃ¡nh giÃ¡ dá»¯ liá»‡u báº±ng hÃ m modeltime_calibrate vÃ  hiá»ƒn thá»‹ giÃ¡ trá»‹ dá»± Ä‘oÃ¡n:\ninvisible(capture.output({\n  k &lt;- modeltime_tbl %&gt;%\n    modeltime_calibrate(test_tbl) %&gt;%\n    modeltime_forecast(\n      new_data    = test_tbl,\n      actual_data = daily_df,\n      keep_data   = TRUE\n    )\n}))\n\n# Create the initial forecast plot\nforecast_plot &lt;- plot_modeltime_forecast(k %&gt;% \n        group_by(Warehouse),\n         .facet_ncol = 2, \n        .interactive = FALSE)\n\n# Rename the legend labels and customize colors\nforecast_plot_custom &lt;- forecast_plot +\n  scale_color_manual(\n    values = c(\"ACTUAL\" = \"darkgray\", \n               \"1_H2O AUTOML - GBM\" = \"red\"),  # Optional: Custom colors\n    labels = c(\"ACTUAL\" = \"Actual Value\", \n               \"1_H2O AUTOML - GBM\" = \"Model Value\")  # New legend labels\n  )\n\n# Print the customized plot\nprint(forecast_plot_custom)\n\n\n\n\n\nKáº¿t quáº£ Ä‘Æ°a ra cÃ³ váº» khÃ¡ tá»‡ khi tá»›i 90% tá»‰ lá»‡ lá»‡ch giá»¯a giÃ¡ trá»‹ quan sÃ¡t Ä‘Æ°á»£c vÃ  giÃ¡ trá»‹ dá»± Ä‘oÃ¡n vÆ°á»£t quÃ¡ 5%. CÃ³ váº» Machine Learning khÃ´ng dá»± Ä‘oÃ¡n tá»‘t Ä‘á»‘i vá»›i trÆ°á»ng há»£p dá»¯ liá»‡u lÃ  chuá»—i thá»i gian.\n\n\nCode\npredict&lt;-k %&gt;% \n  filter(.key == \"prediction\") %&gt;% \n  select(c(.index,Warehouse,.value)) %&gt;% \n  rename(Date = .index,\n         Predicted = .value) %&gt;% \n  mutate(Observed = test_tbl$daily_demand,\n         Diff = round((Observed - Predicted)/Observed*100,2),\n         Check = ifelse(Diff &lt;= 5 & Diff &gt;= -5, \"Passed\",\"Failed\"))\n\nlibrary(gt)\nlibrary(gtExtras)\ngt(predict %&gt;% \n     group_by(Warehouse) %&gt;% \n     count(Check) %&gt;% \n     mutate(Per = round(n/nrow(predict),3))) %&gt;% \n  cols_label(\n    Check = md(\"**Warehouse**\"),\n    n = md(\"**Count**\"),\n    Per = md(\"**Percentage**\")) %&gt;%\n  tab_header(\n    title = md(\"**Evaluating the model's accuracy**\"),\n    subtitle = glue::glue(\"Forecasting from {min(test_tbl$Date)} to {max(test_tbl$Date)}\")) %&gt;%\n   tab_source_note(\n    source_note = str_glue(\"Smaller 5% means passed\")) %&gt;% \n  gt_theme_538() %&gt;% \n  data_color(columns = c(\"Check\"),\n             method = \"factor\",\n             palette = c(\"red\",\"blue\")) %&gt;%\n  tab_options(\n    table.width = pct(80),       # Setting the table width to 80% of the page width\n    table.align = \"center\",      # Centering the table\n    column_labels.font.size = px(14), # Increase font size of column labels\n    table.font.size = px(12),    # Setting font size for the table\n    heading.align = \"center\"     # Centering the heading of the table\n  )\n### Remove Outliers using IQR method:\nfiltered_data &lt;- predict %&gt;%\n  group_by(Warehouse) %&gt;%\n  # Remove outliers using the IQR method\n  filter(\n    between(Diff, \n            quantile(Diff, 0.25) - 1.5 * IQR(Diff),\n            quantile(Diff, 0.75) + 1.5 * IQR(Diff))\n  ) %&gt;%\n  # Adjust values in the Warehouse column\n  mutate(Warehouse = case_when(\n    Warehouse == \"Whse_A\" ~ \"Warehouse A\",\n    Warehouse == \"Whse_C\" ~ \"Warehouse C\",\n    Warehouse == \"Whse_J\" ~ \"Warehouse J\",\n    Warehouse == \"Whse_S\" ~ \"Warehouse S\",\n    TRUE ~ as.character(Warehouse)  # Preserve other values if any\n  ))\n\nggplot(data = filtered_data %&gt;% \n         group_by(Warehouse),\n       aes(x = Date, \n           y = Diff)) + \n  geom_point() +\n  geom_smooth(method = \"lm\")+\n  geom_abline(intercept = 1, \n              slope = 0, color=\"red\", \n              linetype=\"dashed\", \n              size=1)+\n  xlab('Time') +\n  ylab('Difference (%)') +\n  theme_bw()+\n  facet_wrap(~ Warehouse, scales = \"free_y\") +\n  labs(title = \"Evaluating model builded by GBM method\",\n       subtitle = \"Observed vs Predicted value\",\n       caption = \"The red line is abline Y = 0 means accuracry prediction and the blue line is the linear lines between observed and predicted value.\")+\n  theme(\n    plot.title = element_text(hjust = 0.5, size = 16),  # Centering and resizing the title\n    plot.subtitle = element_text(hjust = 0.5, size = 12), # Centering and resizing the subtitle\n    axis.text = element_text(size = 10),  # Resizing axis text\n    axis.title = element_text(size = 12)  # Resizing axis labels\n  )\n\n\n\n\n\n\n\n\n  \n    \n      Evaluating the modelâ€™s accuracy\n\n    \n    \n      Forecasting from 2015-12-08 to 2016-12-30\n    \n    \n      Warehouse\n\n      Count\n\n      Percentage\n\n    \n  \n  \n    \n      Whse_A\n    \n    Failed\n296\n0.252\n    Passed\n7\n0.006\n    \n      Whse_C\n    \n    Failed\n283\n0.241\n    Passed\n9\n0.008\n    \n      Whse_J\n    \n    Failed\n243\n0.207\n    Passed\n35\n0.030\n    \n      Whse_S\n    \n    Failed\n288\n0.246\n    Passed\n12\n0.010\n  \n  \n    \n      Smaller 5% means passed\n    \n  \n  \n\n\n\n\n\n\n\n\n\nÄiá»u mÃ¬nh thÃ­ch nháº¥t á»Ÿ package nÃ y lÃ  ta cÃ³ thá»ƒ dá»… dÃ ng dá»± Ä‘oÃ¡n cho nhiá»u Ä‘á»‘i tÆ°á»£ng khÃ¡c nhau chá»‰ vá»›i gÃ¡n thÃªm hÃ m group_by()."
  },
  {
    "objectID": "Time_series_2.html#há»c-láº¡i-dá»¯-liá»‡u-vÃ -dá»±-Ä‘oÃ¡n-tiáº¿p",
    "href": "Time_series_2.html#há»c-láº¡i-dá»¯-liá»‡u-vÃ -dá»±-Ä‘oÃ¡n-tiáº¿p",
    "title": "Auto Machine Learning",
    "section": "2.8 Há»c láº¡i dá»¯ liá»‡u vÃ  dá»± Ä‘oÃ¡n tiáº¿p:",
    "text": "2.8 Há»c láº¡i dá»¯ liá»‡u vÃ  dá»± Ä‘oÃ¡n tiáº¿p:\nThá»±c cháº¥t dá»¯ liá»‡u tá»« training set vÃ  testing set cÅ©ng Ä‘Æ°á»£c chia ra tá»« bá»™ dá»¯ liá»‡u Ä‘Ã£ biáº¿t ban Ä‘áº§u, cÃ²n dá»¯ liá»‡u trong tÆ°Æ¡ng lai chÃºng ta chÆ°a biáº¿t. VÃ­ dá»¥ nhÆ° á»Ÿ Ä‘Ã¢y, bá»™ dá»¯ liá»‡u nÃ y chá»‰ Ä‘Æ°á»£c thu tháº­p tá»›i ngÃ y 30/12/2016 nÃªn nhu cáº§u Ä‘áº·t hÃ ng cá»§a khÃ¡ch hÃ ng á»Ÿ nÄƒm 2017 trá»Ÿ vá» sau lÃ  chÆ°a biáº¿t. VÃ¬ váº­y, chÃºng ta sáº½ refit mÃ´ hÃ¬nh láº¡i.\nHoáº¡t Ä‘á»™ng refit nghÄ©a lÃ  sá»­ dá»¥ng mÃ´ hÃ¬nh Ä‘Ã£ Ä‘Æ°á»£c train vÃ  chá»©a táº¥t cáº£ dá»¯ liá»‡u mÃ¬nh cÃ³ vÃ  dÃ¹ng nÃ³ Ä‘á»ƒ dá»± Ä‘oÃ¡n giÃ¡ trá»‹ cho má»™t khoáº£ng thá»i gian sáº¯p tá»›i.\n\n\nCode\n## Gá»™p dá»¯ liá»‡u tá»« training set vÃ  testing set thÃ nh má»™t:\ndata_prepared_tbl &lt;- bind_rows(train_tbl, test_tbl)\n\n\n## Táº¡o thÃªm cÃ¡c hÃ ng cho dá»¯ liá»‡u sáº¯p tá»›i. VÃ­ dá»¥ ta cáº§n trong 6 thÃ¡ng thÃ¬ hÃ m sáº½ táº¡o thÃªm 365*4 = 1460 hÃ ng:\nfuture_tbl &lt;- data_prepared_tbl %&gt;%\n    group_by(Warehouse) %&gt;%\n    future_frame(.length_out = \"6 months\") %&gt;%\n    ungroup()\n\n## Táº¡o thÃªm cÃ¡c Ä‘áº·c tÃ­nh khÃ¡c cá»§a dá»¯ liá»‡u giá»‘ng nhÆ° trÃªn Ä‘Ã£ lÃ m:\nfuture_prepared_tbl &lt;- bake(prep(recipe_spec), future_tbl)\n\n\n\n\n\n\n\n\nChá»‰nh thá»i gian dá»± Ä‘oÃ¡n\n\n\n\nBáº¡n cÃ³ thá»ƒ chá»‰nh khoáº£ng thá»i gian cáº§n dá»± Ä‘oÃ¡n theo Ã½ báº¡n trong hÃ m future_frame báº±ng Ä‘á»‘i sá»‘ .length_out.\nVÃ­ dá»¥ má»™t nÄƒm thÃ¬ = \"1 year\", 45 phÃºt thÃ¬ = \"45 minutes\".\n\n\nVÃ  cuá»‘i cÃ¹ng lÃ  dá»± Ä‘oÃ¡n nhu cáº§u Ä‘áº·t hÃ ng cho tá»«ng nhÃ  kho trong 6 thÃ¡ng tiáº¿p theo.\n\n\nCode\nrefit_tbl &lt;- modeltime_tbl %&gt;%\n    modeltime_refit(data_prepared_tbl)\n\n\n\n\nCode\ninvisible(capture.output({\nrefit_tbl&lt;-refit_tbl %&gt;%\n    modeltime_forecast(\n        new_data    = future_prepared_tbl,\n        actual_data = data_prepared_tbl,\n        keep_data   = TRUE)\n  \nrefit_tbl %&gt;% \n  group_by(Warehouse) %&gt;% \n  plot_modeltime_forecast(\n         .facet_ncol = 2, \n         .interactive = FALSE)\n}))"
  }
]